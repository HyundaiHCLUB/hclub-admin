<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.hclub.hyndai.mapper.ClubMapper">

    <select id="getClubList" resultType="site.hclub.hyndai.dto.ClubDTO"
            parameterType="site.hclub.hyndai.domain.ClubVO">
       <include refid="getClubBase"></include>
    </select>
    <sql id="getClubBase">
	   SELECT
		     C.CLUB_NO AS clubNo
		     , C.CLUB_NAME as clubName
		     , C.CLUB_IMAGE as clubImage
		     , C.CLUB_INFO as clubInfo
		     , C.CLUB_LOC as clubLoc
		     , C.CREATED_AT as createdAt
		     , C.MODIFIED_AT as modifiedAt
		     , C.USE_YN as useYn
		     , C.CATEGORY_ID as categoryId
	         , CA.CATEGORY_NAME as categoryName
		 FROM CLUB  C
	     INNER JOIN CATEGORY CA
	     ON CA.category_id = C.CATEGORY_ID
    </sql>
    <select id="getClubCnt" resultType="int" parameterType="site.hclub.hyndai.domain.ClubVO">
    	SELECT 
    		COUNT(*) 
    	FROM(
    		<include refid="getClubBase"></include>
    	)T1
    </select>
    <delete id="deleteClubInfo" parameterType="String">
    	DELETE 
    	FROM	CLUB
    		WHERE CLUB_NO = #{clubNo}
    </delete>
    <update id="updateClubUseYn" parameterType="String">
    	UPDATE
    		CLUB
    	SET 
    		USE_YN = 'Y'
    	WHERE CLUB_NO = #{clubNo}
    </update>


</mapper>